System.register("chunks:///_virtual/game.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,r,n,a,s,h,l,c,u,m,g,f,b,p,d,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,h=t.Color,l=t.Prefab,c=t.AudioSource,u=t.Label,m=t.view,g=t.Vec3,f=t.director,b=t.instantiate,p=t.Sprite,d=t.UITransform,C=t.Component}],execute:function(){var y,_,w,x,v,T,S,z,B,N,k,D,A,L,M,E,P,R,O;a._RF.push({},"5b892c2kOFGJ7YFjJSWdkPy","game",void 0);var U=s.ccclass,W=s.property;t("game",(y=U("game"),_=W(Number),w=W(Number),x=W(h),v=W(l),T=W([h]),S=W(Number),z=W(Number),B=W(Number),y((D=e((k=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(r(e),"ROW_NUM",D,r(e)),i(r(e),"COL_NUM",A,r(e)),i(r(e),"defaultColor",L,r(e)),i(r(e),"boxPrefab",M,r(e)),n(r(e),"_boxSize",void 0),n(r(e),"_boxArray",[]),i(r(e),"colorArray",E,r(e)),i(r(e),"countDownTime",P,r(e)),i(r(e),"_rewardTime",R,r(e)),n(r(e),"rewardTime",0),i(r(e),"punishTime",O,r(e)),n(r(e),"wrongAudioEffect",void 0),n(r(e),"rightAudioEffect",void 0),n(r(e),"scoreLabel",void 0),n(r(e),"countDownTimeLabel",void 0),n(r(e),"score",0),n(r(e),"_gameStop",void 0),n(r(e),"timeCallback",(function(){this.noClickBox()?this.gameStop():(this.countDownTime-=1,this.countDownTime<=0&&(this.countDownTime=0),this.countDownTimeLabel.string=this.countDownTime+"",this.countDownTime<=0&&this.gameStop())})),n(r(e),"noClickBox",(function(){for(var t=0;t<this._boxArray.length;t++)for(var e=this._boxArray[t],o=0;o<e.length;o++){var i=e[o];if(this.compareColor(i.getComponent(p).color,this.defaultColor)){var r=this.clearCrossBoxs(o,t);if(this.findClearBox(r,!1))return!1}}return!0})),e}o(e,t);var a=e.prototype;return a.onLoad=function(){this.wrongAudioEffect=this.getComponents(c)[0],this.rightAudioEffect=this.getComponents(c)[1],this.scoreLabel=this.node.parent.getChildByName("score").getComponent(u),this.countDownTimeLabel=this.node.parent.getChildByPath("timeFrameOut/timeFrameIn/time").getComponent(u),this.countDownTimeLabel.string=this.countDownTime+"";var t=this.node.parent.getChildByName("refresh");t.on("touch-start",this.onRefresh,t),this._boxSize=Math.floor(m.getVisibleSize().width/this.COL_NUM);for(var e=0;e<this.ROW_NUM;e++){for(var o=e*this._boxSize+this._boxSize/2,i=[],r=0;r<this.COL_NUM;r++){var n=r*this._boxSize+this._boxSize/2,a=new g(n,o,0),s=Math.floor(Math.random()*(this.colorArray.length+1)),h=this.defaultColor;s<this.colorArray.length&&(h=this.colorArray[s]);var l=this.createBox(a,h);i[r]=l.getChildByName("body")}this._boxArray[e]=i}this.schedule(this.timeCallback,1)},a.retiming=function(){this.countDownTime<=0&&(this.countDownTime=0),this.countDownTimeLabel.string=this.countDownTime+"",this.unschedule(this.timeCallback),this.countDownTime<=0||this.noClickBox()?this.gameStop():this.schedule(this.timeCallback,1)},a.onRefresh=function(){f.loadScene("game-portrait")},a.start=function(){console.log("game start")},a.createBox=function(t,e){var o=b(this.boxPrefab);return o.setPosition(t),o.getChildByName("body").getComponent(p).color=e,o.getComponent(d).width=this._boxSize,o.getComponent(d).height=this._boxSize,o.getChildByName("background").getComponent(d).width=this._boxSize,o.getChildByName("background").getComponent(d).height=this._boxSize,o.getChildByName("body").getComponent(d).width=.9*this._boxSize,o.getChildByName("body").getComponent(d).height=.9*this._boxSize,this.node.addChild(o),o.getChildByName("body").getComponent("box").setGame(this),o},a.clickBox=function(t){if(!this._gameStop)if(this.compareColor(t.getComponent(p).color,this.defaultColor)){var e=(t.node.getParent().position.x-this._boxSize/2)/this._boxSize,o=(t.node.getParent().position.y-this._boxSize/2)/this._boxSize,i=this.clearCrossBoxs(e,o);this.findClearBox(i,!0)?this.clickRight():this.clickWrong()}else this.clickWrong()},a.clearCrossBoxs=function(t,e){for(var o=[],i=e-1;i>=0;i--){var r=this._boxArray[i][t];if(!this.compareColor(r.getComponent(p).color,this.defaultColor)){o.push(r);break}}for(i=e+1;i<this.ROW_NUM;i++){r=this._boxArray[i][t];if(!this.compareColor(r.getComponent(p).color,this.defaultColor)){o.push(r);break}}for(var n=t-1;n>=0;n--){r=this._boxArray[e][n];if(!this.compareColor(r.getComponent(p).color,this.defaultColor)){o.push(r);break}}for(n=t+1;n<this.COL_NUM;n++){r=this._boxArray[e][n];if(!this.compareColor(r.getComponent(p).color,this.defaultColor)){o.push(r);break}}return o},a.findClearBox=function(t,e){for(var o=0;o<t.length;o++){var i=t[o].getComponent(p).color;if(i!=h.WHITE)for(var r=o+1;r<t.length;r++){var n=t[r].getComponent(p).color;this.compareColor(i,n)&&(t[o].clear=!0,t[r].clear=!0)}}var a=!0;this.rewardTime=0;for(o=0;o<t.length;o++)t[o].clear&&(a=!1,e&&(this.score+=10,this.rewardTime+=this._rewardTime,this.clearBox(t[o])));return!a},a.clickWrong=function(){this._gameStop||(this.wrongAudioEffect.play(),this.score-=10,this.scoreLabel.string=""+this.score,this.countDownTime-=this.punishTime,this.retiming())},a.clickRight=function(){this._gameStop||(this.countDownTime+=this.rewardTime,this.rightAudioEffect.play(),this.scoreLabel.string=""+this.score,this.retiming())},a.clearBox=function(t){t.getComponent("box").clear()},a.compareColor=function(t,e){return t.r==e.r&&t.g==e.g&&t.b==e.b},a.gameStop=function(){this._gameStop=!0,this.unschedule(this.timeCallback);var t=this.node.parent.getChildByName("stop").getComponent(u);t.enabled=!0,t.string="游戏结束，得分："+this.score},e}(C)).prototype,"ROW_NUM",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),A=e(k.prototype,"COL_NUM",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),L=e(k.prototype,"defaultColor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(new h).fromHEX("#8ea2a2")}}),M=e(k.prototype,"boxPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(k.prototype,"colorArray",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[h.GREEN,h.RED,h.BLUE]}}),P=e(k.prototype,"countDownTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),R=e(k.prototype,"_rewardTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=e(k.prototype,"punishTime",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),N=k))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/box.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,e,i,r,s,c,a,u,h;return{setters:[function(t){o=t.inheritsLoose,n=t.defineProperty,e=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.Sprite,c=t.Color,a=t.instantiate,u=t.tween,h=t.Component}],execute:function(){var l;i._RF.push({},"fe816Rxw71PErzuCKS7D6by","box",void 0);var p=r.ccclass;r.property,t("box",p("box")(l=function(t){function i(){for(var o,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,n(e(o),"testpro",111),n(e(o),"_game",void 0),o}o(i,t);var r=i.prototype;return r.onLoad=function(){this.node.on("touch-start",this.on_touch_start,this),this.node.on("touch-end",this.on_touch_end,this)},r.start=function(){},r.setGame=function(t){this._game=t},r.on_touch_start=function(){},r.on_touch_end=function(){this.getComponent(s).color!=c.WHITE&&this._game.clickBox(this)},r.clear=function(){var t=a(this.node);t.parent=this.node.parent,t.setPosition(this.node.position),t.getComponent("box").playClearAnimation(),this.getComponent(s).color=this._game.defaultColor},r.playClearAnimation=function(){var t=this;u(this.getComponent(s)).to(.1,{color:c.TRANSPARENT},{easing:"fade",onUpdate:function(o,n){t.getComponent(s).color=new c(t.getComponent(s).color.r,t.getComponent(s).color.g,t.getComponent(s).color.b,o.a)},onComplete:function(o){t.node.destroy()}}).start()},i}(h))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./game.ts","./box.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});