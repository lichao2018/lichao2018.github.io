System.register("chunks:///_virtual/game.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var e,r,t,i,n,s,c,a,l,h,f,g,p,b,u,x,d;return{setters:[function(o){e=o.applyDecoratedDescriptor,r=o.inheritsLoose,t=o.defineProperty,i=o.assertThisInitialized,n=o.initializerDefineProperty},function(o){s=o.cclegacy,c=o._decorator,a=o.Prefab,l=o.Color,h=o.AudioSource,f=o.Label,g=o.view,p=o.Vec3,b=o.director,u=o.instantiate,x=o.Sprite,d=o.Component}],execute:function(){var m,C,y,_,v,A,S;s._RF.push({},"5b892c2kOFGJ7YFjJSWdkPy","game",void 0);var z=c.ccclass,E=c.property;o("game",(m=z("game"),C=E(a),y=E([l]),m((A=e((v=function(o){function e(){for(var e,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=o.call.apply(o,[this].concat(s))||this,t(i(e),"ROW_NUM",8),t(i(e),"COL_NUM",6),n(i(e),"boxPrefab",A,i(e)),t(i(e),"_boxSize",void 0),t(i(e),"_boxArray",[]),n(i(e),"colorArray",S,i(e)),t(i(e),"wrongAudioEffect",void 0),t(i(e),"rightAudioEffect",void 0),t(i(e),"scoreLable",void 0),t(i(e),"score",0),e}r(e,o);var s=e.prototype;return s.onLoad=function(){this.wrongAudioEffect=this.getComponents(h)[0],this.rightAudioEffect=this.getComponents(h)[1],this.scoreLable=this.node.parent.getChildByName("score").getComponent(f);var o=this.node.parent.getChildByName("refresh");o.on("touch-start",this.onRefresh,o),this._boxSize=Math.floor(g.getVisibleSize().width/this.COL_NUM);for(var e=0;e<this.ROW_NUM;e++){for(var r=e*this._boxSize+this._boxSize/2,t=[],i=0;i<this.COL_NUM;i++){var n=i*this._boxSize+this._boxSize/2,s=new p(n,r,0),c=Math.floor(Math.random()*(this.colorArray.length+1)),a=l.WHITE;c<this.colorArray.length&&(a=this.colorArray[c]);var b=this.createBox(s,a);t[i]=b}this._boxArray[e]=t}},s.onRefresh=function(){b.loadScene("game")},s.start=function(){console.log("game start")},s.createBox=function(o,e){var r=u(this.boxPrefab);return r.setPosition(o),r.getComponent(x).color=e,this.node.addChild(r),r.getComponent("box").setGame(this),r},s.clickBox=function(o){if(this.compareColor(o.getComponent(x).color,l.WHITE)){var e=(o.node.position.x-this._boxSize/2)/this._boxSize;console.log(o.node.position.x+","+this._boxSize/2+","+this._boxSize);var r=(o.node.position.y-this._boxSize/2)/this._boxSize;console.log("clickbox x:"+o.node.position.x+", y : "+o.node.position.y),console.log("clickbox col:"+e+", row : "+r),this.clearCrossBoxs(e,r)}else this.clickWrong()},s.clearCrossBoxs=function(o,e){for(var r=[],t=e-1;t>=0;t--){var i=this._boxArray[t][o];if(!this.compareColor(i.getComponent(x).color,l.WHITE)){r.push(i),console.log("1find box col : "+o+", row : "+t);break}}for(t=e+1;t<this.ROW_NUM;t++){i=this._boxArray[t][o];if(!this.compareColor(i.getComponent(x).color,l.WHITE)){r.push(i),console.log("2find box col : "+o+", row : "+t);break}}for(var n=o-1;n>=0;n--){i=this._boxArray[e][n];if(!this.compareColor(i.getComponent(x).color,l.WHITE)){r.push(i),console.log("3find box col : "+n+", row : "+e);break}}for(n=o+1;n<this.COL_NUM;n++){i=this._boxArray[e][n];if(!this.compareColor(i.getComponent(x).color,l.WHITE)){r.push(i),console.log("4find box col : "+n+", row : "+e);break}}this.findClearBox(r)},s.findClearBox=function(o){for(var e=0;e<o.length;e++){var r=o[e].getComponent(x).color;if(r!=l.WHITE)for(var t=e+1;t<o.length;t++){console.log(o[e].getComponent(x).color+", "+o[t].getComponent(x).color);var i=o[t].getComponent(x).color;this.compareColor(r,i)&&(console.log(e+" clear"),o[e].clear=!0,o[t].clear=!0)}}var n=!0;for(e=0;e<o.length;e++)o[e].clear&&(n=!1,this.score+=10,this.clearBox(o[e]));n?this.clickWrong():this.clickRight()},s.clickWrong=function(){this.wrongAudioEffect.play(),this.score-=10,this.scoreLable.string="score:"+this.score},s.clickRight=function(){this.rightAudioEffect.play(),this.scoreLable.string="score:"+this.score},s.clearBox=function(o){o.getComponent("box").clear()},s.compareColor=function(o,e){return o.r==e.r&&o.g==e.g&&o.b==e.b},e}(d)).prototype,"boxPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(v.prototype,"colorArray",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[l.GREEN,l.RED,l.BLUE]}}),_=v))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/box.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,n,e,c,s,r,i,u;return{setters:[function(o){t=o.inheritsLoose,n=o.defineProperty,e=o.assertThisInitialized},function(o){c=o.cclegacy,s=o._decorator,r=o.Sprite,i=o.Color,u=o.Component}],execute:function(){var l;c._RF.push({},"fe816Rxw71PErzuCKS7D6by","box",void 0);var a=s.ccclass;s.property,o("box",a("box")(l=function(o){function c(){for(var t,c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return t=o.call.apply(o,[this].concat(s))||this,n(e(t),"testpro",111),n(e(t),"_game",void 0),t}t(c,o);var s=c.prototype;return s.onLoad=function(){console.log("box onload"),this.node.on("touch-start",this.on_touch_start,this),this.node.on("touch-end",this.on_touch_end,this)},s.start=function(){console.log("box start")},s.setGame=function(o){this._game=o},s.on_touch_start=function(){console.log("touch start")},s.on_touch_end=function(){console.log("touch end"),this.getComponent(r).color!=i.WHITE?this._game.clickBox(this):console.log("click white box")},s.clear=function(){this.getComponent(r).color=i.WHITE},c}(u))||l);c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./game.ts","./box.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});